<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="0;url=https://t.me/DreamGirlBot">
    <title>DreamGirlBot - Redirecting...</title>
    <script>
        // Получаем актуальную ссылку из localStorage или API
        async function getBotLink() {
            // Проверяем кэш в localStorage (действителен 5 минут)
            const cached = localStorage.getItem('bot_link_cache');
            if (cached) {
                const { link, timestamp } = JSON.parse(cached);
                if (Date.now() - timestamp < 5 * 60 * 1000) {
                    return link;
                }
            }
            
            // Запрашиваем свежую ссылку
            try {
                const response = await fetch('/api/get-bot-link');
                if (response.ok) {
                    const data = await response.json();
                    const link = data.bot_link || 'https://t.me/DreamGirlBot';
                    
                    // Сохраняем в кэш
                    localStorage.setItem('bot_link_cache', JSON.stringify({
                        link: link,
                        timestamp: Date.now()
                    }));
                    
                    return link;
                }
            } catch (error) {
                console.log('Using default bot link');
            }
            
            return 'https://t.me/DreamGirlBot';
        }
        
        // Перенаправляем на актуального бота
        getBotLink().then(link => {
            window.location.href = link;
        });
    </script>
</head>
<body>
    <p>Перенаправляем в DreamGirlBot...</p>
</body>
</html>
